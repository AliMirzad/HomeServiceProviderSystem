<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link rel="stylesheet" href="CSS/style.css"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script
            src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
            integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
            crossorigin="anonymous"
    ></script>
    <script src="js/register.js"></script>
    <title>Document</title>
</head>
<body>
<div class="main">
    <div class="login-form">
        <h2>REGISTER</h2>
        <form method="post">
            <input class="form-input" type="text" name="national-code" placeholder="NationalCode" id="national-code">
            <input class="form-input" type="password" name="password" placeholder="Password" id="password">
            <input class="form-input" type="text" name="first-name" placeholder="FirstName" id="first-name">
            <input class="form-input" type="text" name="last-name" placeholder="LastName" id="last-name">
            <input class="form-input" type="text" name="email" placeholder="Email" id="email">
            <input class="user-radio" type="radio" name="role-radio" id="expert-radio" value="expert">
            <label class="form-radio-expert" for="expert-radio">Expert</label>
            <input class="user-radio" type="radio" name="role-radio" id="customer-radio" value="customer">
            <label class="form-radio-customer" for="customer-radio">Customer</label>
            <input type="file" name="image-file" id="image-file">
            <button type="submit" id="submit-button">SUBMIT</button>
        </form>
    </div>
</div>
<script>
    $("#submit-button").click(function () {
        let form = new FormData();
        form.append("firstName", $("#first-name").val());
        form.append("lastName", $("#last-name").val());
        form.append("email", $("#email").val());
        form.append("nationalCode", $("#national-code").val());
        form.append("password", $("#password").val());
        form.append("type", $(".user-radio:checked").val());
        form.append("profileImage", $("input[type=file]")[0].files[0]);
        // const fi = document.getElementById("wze107-wz-input");
        // var fileInput = document.getElementById("wze107-wz-input");
        // var filePath = fileInput.value;
        // var allowedExtensions = /(\.jpg)$/i;
        // if (fi.files.length > 0) {
        //   if (!allowedExtensions.exec(filePath)) {
        //     $("#errorText").html("file format can be only jpg");
        //     return false;
        //   }
        // }
        // if (fi.files.length > 0) {
        //   for (let i = 0; i <= fi.files.length - 1; i++) {
        //     const fsize = fi.files.item(i).size;
        //     const file = Math.round(fsize / 1024);
        //     if (file > 300) {
        //       $("#errorText").html("image size is over 300kb");
        //       return false;
        //     }
        //   }
        // }
        $.ajax({
            url: "http://localhost:8080/api/user/register",
            type: "POST",
            contentType: false,
            data: form,
            cache: false,
            processData: false,
            success: function (data) {
                alert(data);
            },
            error: function (error) {
                console.log(error);
            },
        });
    });
</script>
</body>
</html>
